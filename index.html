<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Manager</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-robot"></i> Prompt Manager</h1>
            </div>
            
            <div class="sidebar-content">
                <div class="nav-section">
                    <button class="nav-btn active" data-tab="chat">
                        <i class="fas fa-comments"></i>
                        <span>Simple Chat</span>
                    </button>
                    <button class="nav-btn" data-tab="prompts">
                        <i class="fas fa-file-text"></i>
                        <span>My Prompts</span>
                    </button>
                    <button class="nav-btn" data-tab="comparison">
                        <i class="fas fa-balance-scale"></i>
                        <span>Compare LLMs</span>
                    </button>
                    <button class="nav-btn" data-tab="system-prompts">
                        <i class="fas fa-cogs"></i>
                        <span>System Prompts</span>
                    </button>
                    <button class="nav-btn" data-tab="settings">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </button>
                </div>

            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Simple Chat Tab -->
            <div class="tab-content active" id="chat-tab">
                <div class="content-header">
                    <h2>Simple Chat</h2>
                </div>
                
                <div class="chat-container">
                    <!-- Chat Configuration Section -->
                    <div class="chat-config-section">
                        <div class="chat-config-row">
                            <div class="chat-provider-selection">
                                <h3>Model Provider</h3>
                                <div class="searchable-dropdown" id="chat-provider-dropdown">
                                    <input type="text" class="dropdown-search" placeholder="Select provider..." autocomplete="off" readonly>
                                    <div class="dropdown-arrow">▼</div>
                                    <div class="dropdown-menu" id="chat-provider-menu"></div>
                                </div>
                                <div class="ollama-status-compact" id="ollama-status-compact" style="display: none;">
                                    <span class="status-dot" id="ollama-status-dot"></span>
                                    <span class="status-text" id="ollama-status-text">Checking...</span>
                                    <button class="status-action-btn" id="ollama-refresh-btn" style="display: none;" title="Refresh models">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                    <button class="status-action-btn" id="ollama-action-btn" style="display: none;">
                                        <i class="fas fa-play"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="chat-model-selection">
                                <h3>Model Selection</h3>
                                <div class="searchable-dropdown" id="chat-model-dropdown">
                                    <input type="text" class="dropdown-search" placeholder="Search and select model..." autocomplete="off">
                                    <div class="dropdown-arrow">▼</div>
                                    <div class="dropdown-menu" id="chat-model-menu"></div>
                                </div>
                            </div>
                            
                            <div class="chat-context-selection">
                                <h3>Internet Context</h3>
                                <div class="searchable-dropdown" id="chat-internet-dropdown">
                                    <input type="text" class="dropdown-search" placeholder="Select internet context..." autocomplete="off" readonly>
                                    <div class="dropdown-arrow">▼</div>
                                    <div class="dropdown-menu" id="chat-internet-menu"></div>
                                </div>
                                <div class="provider-info" id="chat-provider-info" style="display: none;">
                                    <div class="info-content" id="chat-provider-info-content"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- System Prompt Section for Chat -->
                        <div class="chat-system-prompt-section">
                            <div class="chat-system-prompt-header">
                                <h3>System Prompt</h3>
                                <div class="chat-system-prompt-actions">
                                    <div class="searchable-dropdown" id="chat-system-prompt-dropdown">
                                        <input type="text" class="dropdown-search" placeholder="Select system prompt..." autocomplete="off" readonly>
                                        <div class="dropdown-arrow">▼</div>
                                        <div class="dropdown-menu" id="chat-system-prompt-menu"></div>
                                    </div>
                                    <button class="btn btn-secondary btn-sm" id="chat-edit-system-prompt-btn">
                                        <i class="fas fa-eye"></i> View
                                    </button>
                                </div>
                            </div>
                            <div class="chat-system-prompt-preview" id="chat-system-prompt-preview">
                                <!-- System prompt preview will be loaded here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Chat Messages Area -->
                    <div class="chat-messages-section">
                        <div class="chat-messages" id="chat-messages">
                            <div class="chat-welcome">
                                <i class="fas fa-robot"></i>
                                <h3>Welcome to Simple Chat</h3>
                                <p>Select a model and start chatting!</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Chat Input Section -->
                    <div class="chat-input-section">
                        <div class="chat-input-container">
                            <textarea id="chat-message-input" class="chat-input" rows="3" 
                                placeholder="Type your message here..." disabled></textarea>
                            <button id="chat-send-btn" class="chat-send-btn" disabled>
                                <i class="fas fa-paper-plane"></i>
                                Send
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- My Prompts Tab -->
            <div class="tab-content" id="prompts-tab">
                <!-- Previous Prompts Section -->
                <div class="previous-prompts-section">
                    <div class="section-header">
                        <h3>Previous Prompts & Responses</h3>
                        <div class="search-container">
                            <input type="text" id="prompt-history-search" placeholder="Search prompts and responses..." class="search-input">
                            <i class="fas fa-search search-icon"></i>
                        </div>
                    </div>
                    
                    <div class="prompt-history-list" id="prompt-history-list">
                        <!-- Previous prompts will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- LLM Comparison Tab -->
            <div class="tab-content" id="comparison-tab">
                <div class="content-header">
                    <h2>LLM Comparison</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" id="run-comparison-btn">
                            <i class="fas fa-play"></i> Run Comparison
                        </button>
                        <button class="btn btn-secondary" id="clear-comparison-btn">
                            <i class="fas fa-trash"></i> Clear
                        </button>
                    </div>
                </div>

                <div class="comparison-container">
                    <!-- System Prompt Section -->
                    <div class="system-prompt-section">
                        <div class="system-prompt-header">
                            <h3>System Prompt</h3>
                            <div class="system-prompt-actions">
                                <select id="category-select" class="form-control">
                                    <option value="writing">Writing</option>
                                    <option value="seo">SEO</option>
                                    <option value="coding">Coding</option>
                                    <option value="other">Other</option>
                                </select>
                                <button class="btn btn-icon" id="add-system-prompt-btn" title="Add new system prompt">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="btn btn-secondary" id="edit-system-prompt-btn">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                            </div>
                        </div>
                        <div class="system-prompt-content" id="system-prompt-content">
                            <!-- System prompt content will be loaded here -->
                        </div>
                        <div class="system-prompt-actions">
                            <button id="toggle-prompt-expansion" class="btn btn-link">
                                <i class="fas fa-chevron-down"></i> Show more
                            </button>
                        </div>
                    </div>

                    <!-- Internet Access Section -->
                    <div class="internet-access-section">
                        <div class="internet-access-header">
                            <h3>Internet Access</h3>
                        </div>
                        <div class="internet-access-content">
                            <div class="input-group">
                                <label for="internet-access-select">Search Provider:</label>
                                <select id="internet-access-select" class="form-control">
                                    <option value="none">None</option>
                                    <option value="tavily">Tavily (External API)</option>
                                    <option value="openrouter">OpenRouter (Built-in Web Search)</option>
                                </select>
                            </div>
                            <div class="provider-info" id="provider-info" style="display: none;">
                                <div class="info-content" id="provider-info-content"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Model Comparison Grid -->
                    <div class="model-comparison-grid">
                        <!-- Row 1 -->
                        <div class="model-row">
                            <div class="model-slot">
                                <div class="model-header">
                                    <div class="searchable-dropdown" id="dropdown-1">
                                        <input type="text" class="dropdown-search" placeholder="Search and select Model 1..." autocomplete="off">
                                        <div class="dropdown-arrow">▼</div>
                                        <div class="dropdown-menu" id="menu-1"></div>
                                    </div>
                                </div>
                                <div class="model-output" id="output-1">
                                    <div class="output-placeholder">Model 1 output will appear here</div>
                                </div>
                                <div class="cost-display" id="cost-1" style="display: none;"></div>
                            </div>
                            <div class="model-slot">
                                <div class="model-header">
                                    <div class="searchable-dropdown" id="dropdown-2">
                                        <input type="text" class="dropdown-search" placeholder="Search and select Model 2..." autocomplete="off">
                                        <div class="dropdown-arrow">▼</div>
                                        <div class="dropdown-menu" id="menu-2"></div>
                                    </div>
                                </div>
                                <div class="model-output" id="output-2">
                                    <div class="output-placeholder">Model 2 output will appear here</div>
                                </div>
                                <div class="cost-display" id="cost-2" style="display: none;"></div>
                            </div>
                        </div>

                        <!-- Row 2 -->
                        <div class="model-row">
                            <div class="model-slot">
                                <div class="model-header">
                                    <div class="searchable-dropdown" id="dropdown-3">
                                        <input type="text" class="dropdown-search" placeholder="Search and select Model 3..." autocomplete="off">
                                        <div class="dropdown-arrow">▼</div>
                                        <div class="dropdown-menu" id="menu-3"></div>
                                    </div>
                                </div>
                                <div class="model-output" id="output-3">
                                    <div class="output-placeholder">Model 3 output will appear here</div>
                                </div>
                                <div class="cost-display" id="cost-3" style="display: none;"></div>
                            </div>
                            <div class="model-slot">
                                <div class="model-header">
                                    <div class="searchable-dropdown" id="dropdown-4">
                                        <input type="text" class="dropdown-search" placeholder="Search and select Model 4..." autocomplete="off">
                                        <div class="dropdown-arrow">▼</div>
                                        <div class="dropdown-menu" id="menu-4"></div>
                                    </div>
                                </div>
                                <div class="model-output" id="output-4">
                                    <div class="output-placeholder">Model 4 output will appear here</div>
                                </div>
                                <div class="cost-display" id="cost-4" style="display: none;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- User Input Section -->
                    <div class="user-input-section">
                        <div class="input-group">
                            <label for="user-message">Enter your prompt:</label>
                            <textarea id="user-message" class="form-control" rows="3" 
                                placeholder="Enter your message to send to the selected models..."></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Prompts Management Tab -->
            <div class="tab-content" id="system-prompts-tab">
                <div class="content-header">
                    <h2>System Prompts Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" id="new-prompt-btn">
                            <i class="fas fa-plus"></i> New Prompt
                        </button>
                        <button class="btn btn-secondary" id="import-btn">
                            <i class="fas fa-upload"></i> Import
                        </button>
                        <button class="btn btn-secondary" id="export-btn">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>

                <div class="prompts-grid" id="prompts-grid">
                    <!-- System prompts will be dynamically loaded here -->
                </div>
            </div>

            <!-- Settings Tab -->
            <div class="tab-content" id="settings-tab">
                <div class="content-header">
                    <h2>Settings</h2>
                </div>

                <div class="settings-content">
                    <div class="settings-grid">
                        <div class="settings-left-column">
                            <div class="setting-group">
                                <h3>OpenRouter API</h3>
                                <div class="input-group">
                                    <label for="api-key">API Key:</label>
                                    <input type="password" id="api-key" class="form-control" 
                                        placeholder="Enter your OpenRouter API key...">
                                </div>
                                <button class="btn btn-primary" id="save-api-key">Save API Key</button>
                            </div>

                            <div class="setting-group">
                                <h3>Tavily API</h3>
                                <div class="input-group">
                                    <label for="tavily-api-key">API Key:</label>
                                    <input type="password" id="tavily-api-key" class="form-control" 
                                        placeholder="Enter your Tavily API key...">
                                </div>
                                <button class="btn btn-primary" id="save-tavily-api-key">Save Tavily API Key</button>
                            </div>
                        </div>

                        <div class="settings-right-column">
                            <div class="setting-group">
                                <h3>Available Models</h3>
                                <div style="margin-bottom: 16px;">
                                    <button class="btn btn-secondary" id="refresh-models-btn">
                                        <i class="fas fa-sync-alt"></i> Refresh Models
                                    </button>
                                </div>
                                <div class="models-list" id="models-list">
                                    <p>Configure your API key to see available models</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Prompt Editor Modal -->
    <div class="modal" id="prompt-editor-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">New Prompt</h3>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label for="prompt-title">Title:</label>
                    <input type="text" id="prompt-title" class="form-control" placeholder="Enter prompt title...">
                </div>
                
                <div class="input-group">
                    <label for="prompt-category">Category:</label>
                    <select id="prompt-category" class="form-control">
                        <option value="seo">SEO</option>
                        <option value="writing">Writing</option>
                        <option value="coding">Coding</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="prompt-content">Content:</label>
                    <textarea id="prompt-content" class="form-control" rows="12" 
                        placeholder="Enter your system prompt..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancel-prompt">Cancel</button>
                <button class="btn btn-primary" id="save-prompt">Save Prompt</button>
            </div>
        </div>
    </div>

    <!-- System Prompt Editor Modal -->
    <div class="modal" id="system-prompt-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit System Prompt</h3>
                <button class="close-btn" id="close-system-prompt-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label for="system-prompt-textarea">System Prompt for <span id="modal-category-name">Writing</span>:</label>
                    <textarea id="system-prompt-textarea" class="form-control" rows="12" 
                        placeholder="Enter your system prompt here..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancel-system-prompt">Cancel</button>
                <button class="btn btn-primary" id="save-system-prompt">Save</button>
            </div>
        </div>
    </div>

    <!-- User Prompt Editor Modal -->
    <div class="modal" id="user-prompt-editor-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="user-modal-title">New User Prompt</h3>
                <button class="close-btn" id="close-user-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label for="user-prompt-title">Title:</label>
                    <input type="text" id="user-prompt-title" class="form-control" placeholder="Enter prompt title...">
                </div>
                
                <div class="input-group">
                    <label for="user-prompt-category">Category:</label>
                    <select id="user-prompt-category" class="form-control">
                        <option value="seo">SEO</option>
                        <option value="writing">Writing</option>
                        <option value="coding">Coding</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="user-prompt-content">Content:</label>
                    <textarea id="user-prompt-content" class="form-control" rows="8" 
                        placeholder="Enter your user prompt..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancel-user-prompt">Cancel</button>
                <button class="btn btn-primary" id="save-user-prompt">Save Prompt</button>
            </div>
        </div>
    </div>

    <!-- Add System Prompt Modal -->
    <div class="modal" id="add-system-prompt-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New System Prompt</h3>
                <button class="close-btn" id="close-add-system-prompt-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label for="new-system-prompt-category">Category Name:</label>
                    <input type="text" id="new-system-prompt-category" class="form-control" 
                        placeholder="Enter category name (e.g., Marketing, Research, etc.)">
                </div>
                
                <div class="input-group">
                    <label for="new-system-prompt-content">System Prompt:</label>
                    <textarea id="new-system-prompt-content" class="form-control" rows="12" 
                        placeholder="Enter your system prompt content..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancel-add-system-prompt">Cancel</button>
                <button class="btn btn-primary" id="save-add-system-prompt">Add Prompt</button>
            </div>
        </div>
    </div>

    <!-- Prompt Session Detail Modal -->
    <div class="modal" id="prompt-session-modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>Prompt Session Details</h3>
                <button class="close-btn" id="close-prompt-session-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="session-info">
                    <div class="session-meta">
                        <span class="session-date" id="session-date"></span>
                        <span class="session-models" id="session-models"></span>
                    </div>
                </div>
                
                <div class="session-content">
                    <div class="prompt-section">
                        <h4>System Prompt</h4>
                        <div class="prompt-content" id="session-system-prompt"></div>
                    </div>
                    
                    <div class="prompt-section">
                        <h4>User Prompt</h4>
                        <div class="prompt-content" id="session-user-prompt"></div>
                    </div>
                    
                    <div class="responses-section">
                        <h4>Model Responses</h4>
                        <div class="responses-container" id="session-responses"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" id="delete-session-btn">Delete Session</button>
                <button class="btn btn-secondary" id="close-session-modal">Close</button>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>
